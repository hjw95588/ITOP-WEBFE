(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8b7e430"],{"29f9":function(e,t,a){},"77ba":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",staticClass:"queryParent",attrs:{model:e.queryParams,"label-width":"80px"}},[a("el-form-item",{staticClass:"el-item-two",attrs:{label:"摘要",prop:"taskName"}},[a("el-input",{attrs:{placeholder:"请输入摘要",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.taskName,callback:function(t){e.$set(e.queryParams,"taskName",t)},expression:"queryParams.taskName"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-item-two",attrs:{label:"发起时间"}},[a("el-date-picker",{attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.queryParams.dateRange,callback:function(t){e.$set(e.queryParams,"dateRange",t)},expression:"queryParams.dateRange"}})],1),e._v(" "),a("el-form-item",{staticClass:"searchWrapper"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticClass:"tag-group"},[a("el-radio-group",{on:{change:e.changeStatus},model:{value:e.statusNum,callback:function(t){e.statusNum=t},expression:"statusNum"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("待处理")]),e._v(" "),a("el-radio-button",{attrs:{label:"1"}},[e._v("已处理")])],1),e._v(" "),a("table-toolbar",{attrs:{showSearch:e.showSearch,columns:e.columns},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.resetQuery}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.taskList},on:{"row-dblclick":e.dblclick}},[a("el-table-column",{attrs:{fixed:"left",label:"序号",type:"index",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.queryParams.pageNum-1)*e.queryParams.pageSize+t.$index+1))])]}}])}),e._v(" "),e.columns[0].visible?a("el-table-column",{attrs:{label:"业务编号",prop:"executionId","show-overflow-tooltip":!0,width:"150"}}):e._e(),e._v(" "),e.columns[1].visible?a("el-table-column",{attrs:{label:"摘要",prop:"itemName","show-overflow-tooltip":!0,fixed:"left"}}):e._e(),e._v(" "),e.columns[2].visible?a("el-table-column",{attrs:{label:"业务名称",align:"left",prop:"flowName",width:"180",sortable:""}}):e._e(),e._v(" "),e.columns[3].visible?a("el-table-column",{attrs:{label:"环节名称",align:"center",prop:"taskName",width:"150",sortable:""}}):e._e(),e._v(" "),e.columns[4].visible?a("el-table-column",{attrs:{label:"责任人",align:"center",prop:"handler",width:"100"}}):e._e(),e._v(" "),e.columns[5].visible?a("el-table-column",{attrs:{label:"发起时间",align:"center",prop:"createTime",width:"180",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}],null,!1,3078210614)}):e._e(),e._v(" "),e.columns[6].visible?a("el-table-column",{attrs:{label:"状态",prop:"status",width:"100",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row)))])]}}],null,!1,3777566533)}):e._e(),e._v(" "),e.columns[7].visible?a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"130px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"===t.row.status,expression:"scope.row.status === '0' "},{name:"hasPermi",rawName:"v-hasPermi",value:["kylin:taskTodo:list"],expression:"['kylin:taskTodo:list']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.operHander("1",t.row)}}},[e._v("处理")]),e._v(" "),t.row.revoke?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["kylin:taskTodo:revokeTask"],expression:"['kylin:taskTodo:revokeTask']"}],attrs:{size:"mini",type:"text",icon:"el-icon-refresh-right"},on:{click:function(a){return e.revokeTask(t.row)}}},[e._v("撤回")]):e._e(),e._v(" "),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["kylin:taskTodo:list"],expression:"['kylin:taskTodo:list']"}],attrs:{size:"mini",type:"text",icon:"el-icon-reading"},on:{click:function(a){return e.operHander("4",t.row)}}},[e._v("浏览")])]}}],null,!1,3917925168)}):e._e()],1)],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("ade3")),n=a("9b41"),o=a("2f62");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"WorkList",data:function(){return{total:0,taskList:[],statusNum:"0",queryParams:{pageNum:1,pageSize:10,taskName:"",dateRange:[]},showSearch:!0,columns:[{key:0,label:"业务编号",visible:!1},{key:1,label:"摘要",visible:!0},{key:2,label:"业务名称",visible:!0},{key:3,label:"环节名称",visible:!0},{key:4,label:"责任人",visible:!0},{key:5,label:"发起时间",visible:!0},{key:6,label:"状态",visible:!0},{key:7,label:"操作",visible:!0}]}},computed:u({},Object(o["c"])(["userId","workListPagenum"])),filters:{statusFilter:function(e){var t=e.status;if(""===t||void 0===t||null===t)return"";if(e.deleteReason)return"已作废";var a={0:"待处理",1:"已处理"};return a[t]}},created:function(){this.queryParams.pageNum=this.workListPagenum,this.getList()},beforeRouteLeave:function(e,t,a){"WorkDetailBrowse"===e.name||"WorkDetailHandle"===e.name?(this.$store.dispatch("work/updateListPagenumber",this.queryParams.pageNum),e.meta.activeMenu="/work/work-list"):this.$store.dispatch("work/updateListPagenumber",0),a()},methods:{operHander:function(e,t){"2"!==e&&"3"!==e?(this.$store.commit("work/UPDATE_JUMP_ROUTE_NAME","/work/work-list"),"1"===e?(this.$store.commit("work/UPDATE_WORK_DETAIL",{row:t}),this.$router.push({name:"WorkDetailHandle",params:{itemName:t.itemName,taskName:t.taskName}})):"4"===e&&(this.$store.commit("work/BROWSE_WORK_DETAIL",{row:t}),this.$router.push({name:"WorkDetailBrowse",params:{itemName:t.itemName}}))):this.$message("此功能正在开发，敬请期待！！！")},getList:function(){var e=this;this.loading=!0;var t,a,s=this.userId,r=this.statusNum,i=this.queryParams,o=i.taskName,l=i.pageNum,u=i.pageSize,c=i.dateRange;null!==c&&c.length>0&&(t=c[0],a=c[1],t===a&&(t+=" 00:00:00",a+=" 23:59:59"));var m={userId:s,taskName:o,beginTime:t,endTime:a,status:r,pageNum:l,pageSize:u};Object(n["g"])(m).then((function(t){e.taskList=t.rows,e.total=t.total,e.loading=!1}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.queryParams.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},changeStatus:function(){this.queryParams.pageNum=1,this.getList()},dblclick:function(e){this.operHander("4",e)},revokeTask:function(e){var t=this;this.$confirm("是否确认撤回任务？","警告",{cancelButtonClass:"btn-custom-cancel",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["h"])({taskId:e.id,userId:t.userId}).then((function(e){200===e.code&&(t.$message({type:"success",message:"".concat(e.msg,"!")}),t.getList())})).catch((function(){}))})).catch((function(){}))}}},m=c,p=(a("d3e2"),a("2877")),d=Object(p["a"])(m,s,r,!1,null,"aca7aa24",null);t["default"]=d.exports},d3e2:function(e,t,a){"use strict";a("29f9")}}]);