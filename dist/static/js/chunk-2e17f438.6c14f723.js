(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e17f438"],{"11e7":function(e,t,a){"use strict";a("3be3")},"172b":function(e,t,a){"use strict";a("a748")},"1ffc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project-info"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("项目基础信息")])]),e._v(" "),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目编号",prop:"name1"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name1,callback:function(t){e.$set(e.form,"name1",t)},expression:"form.name1"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name2"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name2,callback:function(t){e.$set(e.form,"name2",t)},expression:"form.name2"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",prop:"name3"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name3,callback:function(t){e.$set(e.form,"name3",t)},expression:"form.name3"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队名称",prop:"name4"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name4,callback:function(t){e.$set(e.form,"name4",t)},expression:"form.name4"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队主管",prop:"name5"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name5,callback:function(t){e.$set(e.form,"name5",t)},expression:"form.name5"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目经理",prop:"name6"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name6,callback:function(t){e.$set(e.form,"name6",t)},expression:"form.name6"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否立项",prop:"name7"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name7,callback:function(t){e.$set(e.form,"name7",t)},expression:"form.name7"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"立项时间",prop:"name8"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name8,callback:function(t){e.$set(e.form,"name8",t)},expression:"form.name8"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目起始时间",prop:"name9"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name9,callback:function(t){e.$set(e.form,"name9",t)},expression:"form.name9"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目结束时间",prop:"name10"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name10,callback:function(t){e.$set(e.form,"name10",t)},expression:"form.name10"}})],1)],1)],1)],1)],1)])],1)},n=[],o={components:{},name:"ProjectInfo",props:{form:{type:Object,default:function(){return{name1:"",name2:"",name3:"",name4:"",name5:"",name6:"",name7:"",name8:"",name9:"",name10:""}}}},data:function(){return{disabled:!0}},created:function(){},watch:{},methods:{},mounted:function(){}},i=o,l=a("2877"),s=Object(l["a"])(i,r,n,!1,null,"70a4480a",null);t["default"]=s.exports},"28a0":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},"29fd":function(e,t,a){},"2ca2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formItem"},[a("span",{staticClass:"ops-label-item"},[e._v("历史处理记录分组")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{prop:"nodeName",label:"步骤",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handler",label:"处理人",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handlerDept",label:"处理人部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"result",label:"处理结果"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handlerTime",label:"处理时间"}})],1)],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("9b41"),l=a("2f62");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={components:{},name:"OpsList",inject:["changeReadOnlyState"],data:function(){return{list:[]}},computed:c(c({},Object(l["c"])(["workDetail","browseWorkDetail"])),{},{readOnlyState:function(){return this.changeReadOnlyState()}}),created:function(){this.getList()},methods:{getList:function(){var e=this,t=this.readOnlyState?this.browseWorkDetail.processInstanceId:this.workDetail.processInstanceId;Object(i["e"])({processInstanceId:t}).then((function(t){e.list=t.data}))}},mounted:function(){}},p=u,d=(a("172b"),a("2877")),m=Object(d["a"])(p,r,n,!1,null,"44dadbc2",null);t["default"]=m.exports},"300f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-form"},[e.approvalVisible?a("Approval",{ref:"approvalForm",attrs:{approvalForm:e.approvalForm}}):e._e(),e._v(" "),"baseForm01"===e.formType?a("BaseForm01",{ref:e.formType,attrs:{form:e.form}}):e._e(),e._v(" "),"baseForm02"===e.formType?a("BaseForm02",{ref:e.formType,attrs:{form:e.form}}):e._e()],1)},n=[],o=(a("96cf"),a("1da1")),i=a("7732"),l=a("764e"),s={components:{BaseForm01:l["BaseForm01"],BaseForm02:l["BaseForm02"],Approval:i["Approval"]},name:"BaseForm",props:{formType:{type:String,default:""},form:{type:Object,default:function(){return{}}},approvalForm:{type:Object,default:function(){return{}}},approvalVisible:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},watch:{},methods:{businessValidate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.formType||!this.$refs[this.formType]){e.next=11;break}return e.next=3,this.$refs[this.formType].validataForm(this.approvalForm);case 3:if(t=e.sent,console.log(t),t.constructor!==Boolean){e.next=10;break}return t||this.msgInfo("温馨提示: 业务信息填写有误, 请仔细填写信息内容！"),e.abrupt("return",t);case 10:return e.abrupt("return",t.validateState);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validataForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.approvalVisible){e.next=13;break}if(t=this.$refs.approvalForm.validateApprolForm(),t){e.next=5;break}return this.msgInfo("温馨提示: * 号为必填项, 请仔细填写审批必填内容！"),e.abrupt("return",t);case 5:if(1!==this.approvalForm.approvalFlag){e.next=10;break}return e.next=8,this.businessValidate();case 8:return a=e.sent,e.abrupt("return",a);case 10:return e.abrupt("return",!0);case 13:return e.next=15,this.businessValidate();case 15:return r=e.sent,e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveChildVariables:function(){!0===this.approvalVisible&&this.$refs.approvalForm.updateApprovalVariables(),this.formType&&this.$refs[this.formType].updateBizFlowVariables&&this.$refs[this.formType].updateBizFlowVariables()}},mounted:function(){}},c=s,u=a("2877"),p=Object(u["a"])(c,r,n,!1,null,"4bb95736",null);t["default"]=p.exports},3022:function(e,t,a){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),a={},r=0;r<t.length;r++)a[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return a},n=/%[sdj%]/g;t.format=function(e){if(!O(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(l(arguments[a]));return t.join(" ")}a=1;for(var r=arguments,o=r.length,i=String(e).replace(n,(function(e){if("%%"===e)return"%";if(a>=o)return e;switch(e){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch(t){return"[Circular]"}default:return e}})),s=r[a];a<o;s=r[++a])_(s)||!S(s)?i+=" "+s:i+=" "+l(s);return i},t.deprecate=function(a,r){if("undefined"!==typeof e&&!0===e.noDeprecation)return a;if("undefined"===typeof e)return function(){return t.deprecate(a,r).apply(this,arguments)};var n=!1;function o(){if(!n){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),n=!0}return a.apply(this,arguments)}return o};var o,i={};function l(e,a){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(a)?r.showHidden=a:a&&t._extend(r,a),D(r.showHidden)&&(r.showHidden=!1),D(r.depth)&&(r.depth=2),D(r.colors)&&(r.colors=!1),D(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var a=l.styles[t];return a?"["+l.colors[a][0]+"m"+e+"["+l.colors[a][1]+"m":e}function c(e,t){return e}function u(e){var t={};return e.forEach((function(e,a){t[e]=!0})),t}function p(e,a,r){if(e.customInspect&&a&&P(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var n=a.inspect(r,e);return O(n)||(n=p(e,n,r)),n}var o=d(e,a);if(o)return o;var i=Object.keys(a),l=u(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(a)),F(a)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return m(a);if(0===i.length){if(P(a)){var s=a.name?": "+a.name:"";return e.stylize("[Function"+s+"]","special")}if(j(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(x(a))return e.stylize(Date.prototype.toString.call(a),"date");if(F(a))return m(a)}var c,g="",_=!1,y=["{","}"];if(v(a)&&(_=!0,y=["[","]"]),P(a)){var w=a.name?": "+a.name:"";g=" [Function"+w+"]"}return j(a)&&(g=" "+RegExp.prototype.toString.call(a)),x(a)&&(g=" "+Date.prototype.toUTCString.call(a)),F(a)&&(g=" "+m(a)),0!==i.length||_&&0!=a.length?r<0?j(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special"):(e.seen.push(a),c=_?f(e,a,r,l,i):i.map((function(t){return b(e,a,r,l,t,_)})),e.seen.pop(),h(c,g,y)):y[0]+g+y[1]}function d(e,t){if(D(t))return e.stylize("undefined","undefined");if(O(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}return w(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function m(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,a,r,n){for(var o=[],i=0,l=t.length;i<l;++i)N(t,String(i))?o.push(b(e,t,a,r,String(i),!0)):o.push("");return n.forEach((function(n){n.match(/^\d+$/)||o.push(b(e,t,a,r,n,!0))})),o}function b(e,t,a,r,n,o){var i,l,s;if(s=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},s.get?l=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(l=e.stylize("[Setter]","special")),N(r,n)||(i="["+n+"]"),l||(e.seen.indexOf(s.value)<0?(l=_(a)?p(e,s.value,null):p(e,s.value,a-1),l.indexOf("\n")>-1&&(l=o?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n"))):l=e.stylize("[Circular]","special")),D(i)){if(o&&n.match(/^\d+$/))return l;i=JSON.stringify(""+n),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+l}function h(e,t,a){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return r>60?a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1]:a[0]+t+" "+e.join(", ")+" "+a[1]}function v(e){return Array.isArray(e)}function g(e){return"boolean"===typeof e}function _(e){return null===e}function y(e){return null==e}function w(e){return"number"===typeof e}function O(e){return"string"===typeof e}function k(e){return"symbol"===typeof e}function D(e){return void 0===e}function j(e){return S(e)&&"[object RegExp]"===T(e)}function S(e){return"object"===typeof e&&null!==e}function x(e){return S(e)&&"[object Date]"===T(e)}function F(e){return S(e)&&("[object Error]"===T(e)||e instanceof Error)}function P(e){return"function"===typeof e}function I(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(a){if(D(o)&&(o=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/prod-api",BASE_URL:"/"}).NODE_DEBUG||""),a=a.toUpperCase(),!i[a])if(new RegExp("\\b"+a+"\\b","i").test(o)){var r=e.pid;i[a]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",a,r,e)}}else i[a]=function(){};return i[a]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=v,t.isBoolean=g,t.isNull=_,t.isNullOrUndefined=y,t.isNumber=w,t.isString=O,t.isSymbol=k,t.isUndefined=D,t.isRegExp=j,t.isObject=S,t.isDate=x,t.isError=F,t.isFunction=P,t.isPrimitive=I,t.isBuffer=a("d60a");var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),$[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=a("28a0"),t._extend=function(e,t){if(!t||!S(t))return e;var a=Object.keys(t),r=a.length;while(r--)e[a[r]]=t[a[r]];return e};var A="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function z(e,t){if(!e){var a=new Error("Promise was rejected with a falsy value");a.reason=e,e=a}return t(e)}function L(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function a(){for(var a=[],r=0;r<arguments.length;r++)a.push(arguments[r]);var n=a.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};t.apply(this,a).then((function(t){e.nextTick(i,null,t)}),(function(t){e.nextTick(z,t,i)}))}return Object.setPrototypeOf(a,Object.getPrototypeOf(t)),Object.defineProperties(a,r(t)),a}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t=e[A];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,a,r=new Promise((function(e,r){t=e,a=r})),n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);n.push((function(e,r){e?a(e):t(r)}));try{e.apply(this,n)}catch(i){a(i)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=A,t.callbackify=L}).call(this,a("f28c"))},"3be3":function(e,t,a){},"4fa3":function(e,t,a){},"52a7b":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__),E_eclipse_work_space_xintuo_qian_ITOP_WEBFE_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("3835"),mixin={data:function(){return{}},created:function(){},mounted:function(){},methods:{find:function(e,t,a){for(var r=e.indexOf(t),n=0;n<a;n++)r=e.indexOf(t,r+1);return r},numberInputHandler:function(e){var t=e.split("."),a=Object(E_eclipse_work_space_xintuo_qian_ITOP_WEBFE_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__["a"])(t,2),r=a[0],n=a[1],o=this[r][n],i=this.find(o,".",1);i>0&&(this[r][n]=o.slice(0,i)),/^[\d.]+$/.test(o)||(this[r][n]=o.replace(/[^\d.]/g,""))},tableNumberInputHandler:function tableNumberInputHandler(item,itemIndex,name){var keyRoot=eval("this."+item),val=keyRoot[itemIndex][name],index=this.find(val,".",1);index>0&&(keyRoot[itemIndex][name]=val.slice(0,index)),/^[\d.]+$/.test(val)||(keyRoot[itemIndex][name]=val.replace(/[^\d.]/g,""))}}};__webpack_exports__["default"]=mixin},5722:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formItem"},[a("el-row",[a("el-col",{attrs:{span:16}},[a("span",{staticClass:"bpmn-label-item"},[e._v("【"+e._s(e.flowName)+"流程】(绿色为已完成，蓝色为处理中)")]),e._v(" "),a("el-button-group",{key:"scale-control"},[a("el-tooltip",{attrs:{effect:"light",content:"缩小视图"}},[a("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom<.2,icon:"el-icon-zoom-out"},on:{click:function(t){return e.processZoomOut()}}})],1),e._v(" "),a("el-button",{attrs:{size:e.headerButtonSize}},[e._v(e._s(Math.floor(10*this.defaultZoom*10)+"%"))]),e._v(" "),a("el-tooltip",{attrs:{effect:"light",content:"放大视图"}},[a("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom>4,icon:"el-icon-zoom-in"},on:{click:function(t){return e.processZoomIn()}}})],1),e._v(" "),a("el-tooltip",{attrs:{effect:"light",content:"重置视图并居中"}},[a("el-button",{attrs:{size:e.headerButtonSize,icon:"el-icon-c-scale-to-original"},on:{click:function(t){return e.processReZoom()}}})],1)],1),e._v(" "),a("div",{ref:"canvas",staticClass:"canvas",style:{height:e.elCanvasContainerHeight}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",[a("el-card",{staticStyle:{"overflow-y":"auto",margin:"0px",padding:"0px"},attrs:{shadow:"always","body-style":{height:e.elCardContainerHeight}}},[0!==e.nodeAssigneeList.length?a("div",{staticClass:"block"},[a("el-timeline",{staticStyle:{padding:"0"},attrs:{reverse:!1}},e._l(e.nodeAssigneeList,(function(t,r){return a("el-timeline-item",{key:r,attrs:{icon:"1"===t.status?"el-icon-check":"el-icon-more",color:"#47ADB7",size:"large",timestamp:t.createdTime,placement:"top"}},[a("el-card",[a("div",{staticClass:"node-assignee-header"},[a("el-tooltip",{attrs:{content:t.taskId,placement:"bottom",effect:"light"}},[!0===t.sign?a("el-tag",{attrs:{type:"warning"}},[a("i",{staticClass:"el-icon-connection"},[e._v(" 会签任务")])]):e._e(),e._v(" "),!1===t.sign?a("el-tag",{attrs:{type:"success"}},[a("i",{staticClass:"el-icon-link"},[e._v(" 普通任务")])]):e._e()],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.assigneeSet}},[a("el-table-column",{attrs:{label:"处理人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.assigneeId,placement:"bottom",effect:"light"}},[a("span",[e._v(e._s(t.row.assigneeName))])])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"处理时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(void 0===t.row.handleTime?"—— —— —— ——":t.row.handleTime))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.handleFlag?a("el-tag",{attrs:{type:"success"}},[e._v("已处理")]):e._e(),e._v(" "),!0!==t.row.handleFlag?a("el-tag",{attrs:{type:"info"}},[e._v("未处理")]):e._e()]}}],null,!0)})],1)],1)],1)})),1)],1):e._e(),e._v(" "),0===e.nodeAssigneeList.length?a("el-empty",{attrs:{"image-size":200}}):e._e()],1)],1)])],1)],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("ade3")),i=a("7024"),l=a("9b41"),s=a("6719"),c=a("2f62");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={mixins:[s["default"]],components:{},name:"BpmnViewer",inject:["changeReadOnlyState"],data:function(){return{size:"",defaultZoom:1,xmlStr:null,bpmnModeler:null,canvas:null,modeling:null,finishedNodeList:[],flowName:"",businessKey:"",currentNodeId:"",currentNodeIdGroupKey:"",processInstanceId:"",taskName:"",taskDefinitionKey:"",taskStatus:"",groupKey:"",nodeAssigneeList:[]}},props:{headerButtonSize:{type:String,default:"small",validator:function(e){return-1!==["default","medium","small","mini"].indexOf(e)}}},computed:p(p({},Object(c["c"])(["workDetail","browseWorkDetail"])),{},{readOnlyState:function(){return this.changeReadOnlyState()}}),created:function(){},watch:{},methods:{initPage:function(){var e=this,t=this.readOnlyState?this.browseWorkDetail.id:this.workDetail.id;this.flowName=this.readOnlyState?this.browseWorkDetail.flowName:this.workDetail.flowName,this.businessKey=this.readOnlyState?this.browseWorkDetail.businessKey:this.workDetail.businessKey,this.processInstanceId=this.readOnlyState?this.browseWorkDetail.processInstanceId:this.workDetail.processInstanceId,this.taskName=this.readOnlyState?this.browseWorkDetail.taskName:this.workDetail.taskName,this.taskDefinitionKey=this.readOnlyState?this.browseWorkDetail.taskDefinitionKey:this.workDetail.taskDefinitionKey,this.taskStatus=this.readOnlyState?this.browseWorkDetail.status:this.workDetail.status,Object(l["c"])({taskId:t}).then((function(t){var a=t.data;e.xmlStr=a.resourceName,e.finishedNodeList=a.finishedNodeList,e.currentNodeId=a.currentNodeId,e.initBpmn()}))},initBpmn:function(){var e=this.$refs.canvas;this.bpmnModeler=new i["a"]({container:e,additionalModules:[{paletteProvider:["value",""],bendpoints:["value",""],contextPadProvider:["value",""],labelEditingProvider:["value",""]}]}),this.modeling=this.bpmnModeler.get("modeling"),this.createNewDiagram(),this.addEventBusListener()},processZoomIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom+100*e)/100;t>4&&this.msgInfo("放大视图比例不得高于400%！"),this.defaultZoom=t,this.bpmnModeler.get("canvas").zoom(this.defaultZoom)},processZoomOut:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom-100*e)/100;t<.2&&this.msgInfo("缩小视图比例不得低于20%！"),this.defaultZoom=t,this.bpmnModeler.get("canvas").zoom(this.defaultZoom)},processZoomTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e<.2&&this.msgInfo("缩小视图比例不得低于20%！"),e>4&&this.msgInfo("放大视图比例不得高于400%！"),this.defaultZoom=e,this.bpmnModeler.get("canvas").zoom(e)},processReZoom:function(){this.defaultZoom=1,this.bpmnModeler.get("canvas").zoom("fit-viewport","auto")},createNewDiagram:function(){var e=this;this.xmlStr&&this.bpmnModeler.importXML(this.xmlStr,(function(t){if(t)e.$message.error("BPMN文件不规范！"+t);else{e.bpmnModeler.get("canvas").zoom("fit-viewport","auto");var a=e.bpmnModeler.get("elementRegistry");if(e.currentNodeId){var r=a.get(e.currentNodeId);e.modeling.setColor(r,{fill:"#E4EFFF",stroke:"#236AAE"}),e.currentNodeIdGroupKey=r.businessObject.$attrs["activiti:candidateUsers"];var n=e.currentNodeIdGroupKey.indexOf("{"),o=e.currentNodeIdGroupKey.lastIndexOf("}"),i={processInstanceId:e.processInstanceId,nodeId:r.businessObject.id,groupKey:e.currentNodeIdGroupKey.substring(n+1,o)};e.getNodeAssignee(i)}e.finishedNodeList.map((function(t){if(t!==e.currentNodeId){var r=a.get(t);e.modeling.setColor(r,{fill:"#F7FFFC",stroke:"#71CFAA"})}})),document.querySelector(".bjs-powered-by").remove()}}))},addEventBusListener:function(){var e=this,t=this.bpmnModeler.get("eventBus"),a=["element.click"];a.forEach((function(a){t.on(a,(function(t){if("bpmn:UserTask"===t.element.businessObject.$type){e.taskName=t.element.businessObject.name,e.groupKey=t.element.businessObject.$attrs["activiti:candidateUsers"];var a=e.groupKey.indexOf("{"),r=e.groupKey.lastIndexOf("}"),n={processInstanceId:e.processInstanceId,nodeId:t.element.businessObject.id,groupKey:e.groupKey.substring(a+1,r)};e.getNodeAssignee(n)}}))}))},getNodeAssignee:function(e){var t=this;Object(l["f"])(e).then((function(e){if(200===e.code){var a=e.data;t.nodeAssigneeList=a}else t.msgError(e.msg)}))}},mounted:function(){this.initPage()}},m=d,f=(a("ea5f"),a("2877")),b=Object(f["a"])(m,r,n,!1,null,"29aa57b5",null);t["default"]=b.exports},6719:function(e,t,a){"use strict";a.r(t);var r={data:function(){return{tabContainerHeight:0,elCardContainerHeight:0,elCanvasContainerHeight:0}},created:function(){},mounted:function(){var e=this;this.getTableHeight(),window.onresize=function(){e.getTableHeight()}},methods:{getTableHeight:function(){var e=this;this.$nextTick((function(){var t=104,a=document.documentElement.clientHeight;e.tabContainerHeight=a-t-83+"px",e.elCardContainerHeight=a-t-89+"px",e.elCanvasContainerHeight=a-t-119+"px"}))},pageBack:function(){this.$router.go(-1)}}};t["default"]=r},"6bc1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"establish-project"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("实施立项")])]),e._v(" "),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目预算金额（万元）",prop:"name1"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name1,callback:function(t){e.$set(e.form,"name1",t)},expression:"form.name1"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目费用（万元）",prop:"name2"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name2,callback:function(t){e.$set(e.form,"name2",t)},expression:"form.name2"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目费用占比（%）",prop:"name3"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name3,callback:function(t){e.$set(e.form,"name3",t)},expression:"form.name3"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内部人工成本（万元）",prop:"name4"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name4,callback:function(t){e.$set(e.form,"name4",t)},expression:"form.name4"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内部人工成本占比（%）",prop:"name5"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name5,callback:function(t){e.$set(e.form,"name5",t)},expression:"form.name5"}})],1)],1)],1),e._v(" "),e._l(e.form.list,(function(t,r){return a("el-row",{key:r},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"外采1",prop:"list["+r+"]name1"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:t.name1,callback:function(a){e.$set(t,"name1",a)},expression:"item.name1"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"金额（万元）",prop:"list["+r+"]name2"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:t.name2,callback:function(a){e.$set(t,"name2",a)},expression:"item.name2"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"占比（%）",prop:"list["+r+"]name3"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:t.name3,callback:function(a){e.$set(t,"name3",a)},expression:"item.name3"}})],1)],1)],1)})),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"外部采购费用-其他（万元）",prop:"tableData"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.tableData,border:"","header-cell-style":{textAlign:"center",fontWeight:"normal",padding:"0"}}},[a("el-table-column",{attrs:{prop:"date",label:"投入名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"投入金额(万元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"占比（%）"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目预估金额（万元）",prop:"name6"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name6,callback:function(t){e.$set(e.form,"name6",t)},expression:"form.name6"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目毛利润（万元）",prop:"name7"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name7,callback:function(t){e.$set(e.form,"name7",t)},expression:"form.name7"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目毛利率（%）",prop:"name8"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name8,callback:function(t){e.$set(e.form,"name8",t)},expression:"form.name8"}})],1)],1)],1)],2)],1)])],1)},n=[],o={components:{},name:"EstablishProject",props:{form:{type:Object,default:function(){return{list:[],tableData:[],name1:"",name2:"",name3:"",name4:"",name5:"",name6:"",name7:"",name8:"",name9:"",name10:"",name11:""}}}},data:function(){return{disabled:!0}},created:function(){},watch:{},methods:{},mounted:function(){}},i=o,l=a("2877"),s=Object(l["a"])(i,r,n,!1,null,"00ed5a6a",null);t["default"]=s.exports},"6bfe":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));a("b05c");var r=a("53ca"),n=(a("6b54"),a("2b0e"));function o(e){console.log(44444);var t={};return e&&"[object Function]"===t.toString.call(e)}function i(e){return void 0===e}"object"===("undefined"===typeof Int8Array?"undefined":Object(r["a"])(Int8Array))||!n["default"].prototype.$isServer&&"function"===typeof document.childNodes||(o=function(e){return"function"===typeof e||!1})},"764e":function(e,t,a){"use strict";a.r(t);var r=a("cb13");a.d(t,"BaseForm01",(function(){return r["default"]}));var n=a("deb2");a.d(t,"BaseForm02",(function(){return n["default"]}))},7732:function(e,t,a){"use strict";a.r(t);var r=a("787d");a.d(t,"Approval",(function(){return r["default"]}));var n=a("1ffc");a.d(t,"ProjectInfo",(function(){return n["default"]}));var o=a("e738");a.d(t,"ContractInfo",(function(){return o["default"]}));var i=a("6bc1");a.d(t,"EstablishProject",(function(){return i["default"]}))},"787d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"approval-compoents"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("审批")])]),e._v(" "),a("div",[a("el-form",{ref:"approvalForm",attrs:{model:e.approvalForm,"label-width":"150px",rules:e.rules,disabled:e.readOnlyState}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审批结果",prop:"approvalFlag"}},[a("el-radio-group",{model:{value:e.approvalForm.approvalFlag,callback:function(t){e.$set(e.approvalForm,"approvalFlag",t)},expression:"approvalForm.approvalFlag"}},[a("el-radio",{attrs:{label:1}},[e._v("同意")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("不同意")])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审批意见",prop:"approvalSuggestion"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入审批意见"},model:{value:e.approvalForm.approvalSuggestion,callback:function(t){e.$set(e.approvalForm,"approvalSuggestion",t)},expression:"approvalForm.approvalSuggestion"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审批人员",prop:"approvalPerson"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.approvalForm.approvalPerson,callback:function(t){e.$set(e.approvalForm,"approvalPerson",t)},expression:"approvalForm.approvalPerson"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属部门",prop:"approvalDept"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.approvalForm.approvalDept,callback:function(t){e.$set(e.approvalForm,"approvalDept",t)},expression:"approvalForm.approvalDept"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审批时间",prop:"approvalTime"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.approvalForm.approvalTime,callback:function(t){e.$set(e.approvalForm,"approvalTime",t)},expression:"approvalForm.approvalTime"}})],1)],1)],1)],1)],1)])],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("ade3")),i=a("2f62"),l=(a("b287"),a("f409"));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={components:{},name:"Approval",props:{approvalForm:{type:Object,default:function(){return{approvalFlag:"",approvalSuggestion:"",approvalPerson:"",approvalDept:"",approvalTime:""}}}},inject:["changeReadOnlyState"],data:function(){return{disabled:!0,rules:{approvalFlag:[{required:!0,message:"必填项",trigger:"change"}]}}},computed:c(c({},Object(i["c"])(["name","depts"])),{},{readOnlyState:function(){return this.changeReadOnlyState()}}),created:function(){this.initData()},watch:{},methods:{initData:function(){this.readOnlyState?"{}"===JSON.stringify(this.approvalForm)&&(this.approvalForm.approvalPerson=this.name,this.approvalForm.approvalDept=this.depts[0].deptName):(this.approvalForm.approvalPerson=this.name,this.approvalForm.approvalDept=this.depts[0].deptName,this.approvalForm.approvalTime=Object(l["d"])(Date.now(),"{y}-{m}-{d} {h}:{i}:{s}"))},updateApprovalVariables:function(){var e={pass:1===this.approvalForm.approvalFlag};this.$store.commit("work/UPDATE_APPROVAL_VARIABLES",e)},validateApprolForm:function(){var e;return this.$refs.approvalForm.validate((function(t){e=t})),e}},mounted:function(){}},p=u,d=a("2877"),m=Object(d["a"])(p,r,n,!1,null,"58d6acf5",null);t["default"]=m.exports},a748:function(e,t,a){},b287:function(e,t,a){"use strict";a.r(t),a.d(t,"NumberReg",(function(){return r})),a.d(t,"PercentNumberReg",(function(){return n}));a("4917");var r=function(e,t,a){var r=t.trim().match(/\./g);r&&r.length>1?a(new Error("格式不正确")):a()},n=function(e,t,a){var r=t.trim().match(/\./g),n=+t.trim();r&&r.length>1?a(new Error("格式不正确")):n<0||n>100?a(new Error("数字范围有误")):a()}},bf27:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.visible?a("el-dialog",{attrs:{title:e.title,visible:e.visible,width:e.width,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[a("div",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-row",[a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入部门名称","prefix-icon":"el-icon-search",size:"small"},on:{input:e.searchDept},model:{value:e.searchDeptValue,callback:function(t){e.searchDeptValue=t},expression:"searchDeptValue"}})],1),e._v(" "),a("div",{staticClass:"tree-container"},[a("el-tree",{directives:[{name:"show",rawName:"v-show",value:!e.isSearching,expression:"!isSearching"}],ref:"deptTree",staticClass:"filter-tree",style:{overflow:"auto"},attrs:{lazy:"","highlight-current":!0,load:e.eltreeLoadNode,props:e.defaultProps,"node-key":"deptId","default-expanded-keys":["0000000000"]},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSearching,expression:"isSearching"}],staticClass:"dept-list"},[e.searchDeptList.length>0?a("div",{staticClass:"has-data"},e._l(e.searchDeptList,(function(t,r){return a("div",{key:r,on:{click:function(a){return e.handleNodeClick(t)}}},[e._v("\n                  "+e._s(t.deptName)+"\n                ")])})),0):a("div",{staticClass:"no-data"},[e._v("暂无数据")])])],1)],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-row",{staticClass:"pad-b-10",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.formLabelAlign.userName,callback:function(t){e.$set(e.formLabelAlign,"userName",t)},expression:"formLabelAlign.userName"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchNameHandler}},[e._v("人员查询")])],1)],1),e._v(" "),e.selectedUserList.length>0?a("div",{staticClass:"tagWrap"},[a("span",{staticClass:"c-189"},[e._v(" 已选择用户：")]),e._v(" "),e._l(e.selectedUserList,(function(t){return a("el-tag",{key:t.userId,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleCloseTagItem(t)}}},[e._v("\n              "+e._s(t.userName)+"\n            ")])}))],2):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-bottom":"20px",overflow:"auto"},attrs:{data:e.tableData,height:e.tabalHeight,"element-loading-text":"Loading"}},[a("el-table-column",{attrs:{align:"center",label:"用户编码",prop:"userId"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"用户名称",prop:"userName"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"部门",prop:"deptName"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dept,(function(t,r){return a("span",{key:r},[e._v(e._s(t.deptName))])}))}}],null,!1,1807517202)}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"80","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){return e.checkUser(t.row,t.$index)}}},[e._v(e._s(t.row.checkState?"取消选择":"选择"))])],1)],1)]}}],null,!1,88487162)})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,background:!0,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)]):e._e()],1)},n=[],o=(a("8e6e"),a("456d"),a("ade3")),i=(a("96cf"),a("1da1")),l=(a("ac6a"),a("20d6"),a("b775")),s=a("c9b7");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={model:{prop:"checkedCode",event:"emitValue"},props:{title:{type:String,default:"弹窗"},visible:{type:Boolean,default:!1},width:{type:String,default:"80%"},selectedUserList:{type:Array,default:function(){return[]}},isMultipleChoice:{type:Boolean,default:!0}},data:function(){return{isSearching:!1,searchDeptValue:"",searchDeptList:[],searchDeptById:"",formLabelAlign:{userName:""},defaultProps:{label:"deptName",children:"zones",isLeaf:"leaf"},listLoading:!0,tableData:[],currentPage:1,pageSize:10,total:0,tabalHeight:0}},created:function(){},mounted:function(){this.getTabaleHeight()},methods:{getTabaleHeight:function(){var e=this;this.$nextTick((function(){var t=document.documentElement.clientHeight,a=316;e.tabalHeight=t-a+"px"}))},initData:function(){this.isSearching=!1,this.searchDeptValue="",this.searchDeptById="",this.formLabelAlign.userName="",this.tableData=[],this.currentPage=1,this.pageSize=10,this.total=0},resetPage:function(){this.initData(),this.fetchData()},searchDept:Object(s["a"])((function(e,t,a){var r=this;""!==this.searchDeptValue?Object(l["a"])({url:"/system/dept/list?deptName=".concat(this.searchDeptValue),method:"GET"}).then((function(e){200===e.code?(r.searchDeptList=e.rows,r.isSearching=!0):r.$message({type:"error",message:e.message})})):this.isSearching=!1}),500),eltreeLoadNode:function(e,t){0===e.level&&this.eltreeLoadfirstnode(t),e.level>=1&&this.eltreeLoadchildnode(e,t)},eltreeLoadfirstnode:function(e){var t=this;Object(l["a"])({url:"/system/dept/parentNode",method:"GET"}).then((function(a){if(200===a.code)return e([a.data]);t.$message({type:"error",message:"获取根节点部门失败!"})}))},eltreeLoadchildnode:function(e,t){var a=this;Object(l["a"])({url:"/system/dept/find/".concat(e.data.deptId),method:"GET"}).then((function(e){if(200===e.code)return t(e.data);a.$message({type:"error",message:"获取子部门树失败!"})}))},searchNameHandler:function(){this.currentPage=1,this.fetchData()},handleCloseTagItem:function(e){var t=this.selectedUserList.findIndex((function(t){return t.userId===e.userId}));this.tableData.forEach((function(t,a,r){t.userId===e.userId&&(r[a].checkState=!1)})),this.selectedUserList.splice(t,1)},submit:function(){var e=this;0!==this.selectedUserList.length&&this.selectedUserList.forEach((function(t){e.$delete(t,"checkState")})),console.log("选中的人员",this.selectedUserList),this.$emit("updateUserList",this.selectedUserList),this.handleClose()},tableRowClickHander:function(e){this.$emit("selectItem",e),this.handleClose()},handleClose:function(){this.$emit("update:visible",!1)},checkUser:function(e,t){e.checkState?this.handleCloseTagItem(e):this.addUserItem(e,t)},addUserItem:function(e,t){this.isMultipleChoice?this.selectedUserList.push(e):(this.selectedUserList.splice(0,1,e),this.tableData.forEach((function(e){return e.checkState=!1}))),this.tableData[t].checkState=!0},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},handleSizeChange:function(e){this.pageSize=e,this.fetchData()},handleNodeClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchDeptById=t.deptId,this.fetchData();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),fetchData:function(){var e=this;this.listLoading=!0;var t={};t.userName=this.formLabelAlign.userName,t.pageNum=this.currentPage-1,t.pageSize=this.pageSize,t.deptIdStr=this.searchDeptById,t.status=0,t.delFlag=0,Object(l["a"])({url:"/system/user/brief/list",method:"GET",params:t}).then((function(t){200===t.code?(e.listLoading=!1,t.rows?e.tableData=t.rows.map((function(e){return u(u({},e),{},{checkState:!1})})):e.tableData=[],e.total=t.total,e.fileUserSelect()):(e.listLoading=!1,e.$message({type:"error",message:"获取用户列表失败!"}))}))},fileUserSelect:function(){var e=this;0!==this.selectedUserList.length&&this.selectedUserList.forEach((function(t){e.tableData.forEach((function(a,r,n){t.userId===a.userId&&(e.tableData[r].checkState=!0)}))}))}}},d=p,m=(a("d99d"),a("2877")),f=Object(m["a"])(d,r,n,!1,null,"645dba90",null);t["default"]=f.exports},c9b7:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a481"),a("20d6");function r(e,t){var a;t=t||200;return function(){var r=this,n=arguments;a&&clearTimeout(a),a=setTimeout((function(){a=null,e.apply(r,n)}),t)}}},cb13:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-form01"},[a("project-info",{ref:"projectForm",attrs:{form:e.form.projectForm}}),e._v(" "),a("contract-info",{ref:"contractForm",attrs:{form:e.form.contractForm}}),e._v(" "),a("establish-project",{ref:"establishProject",attrs:{form:e.form.establishProjectForm}})],1)},n=[],o=(a("96cf"),a("1da1")),i=a("7732"),l={components:{ProjectInfo:i["ProjectInfo"],ContractInfo:i["ContractInfo"],EstablishProject:i["EstablishProject"]},name:"BaseForm01",props:{form:{type:Object,default:function(){return{projectForm:{},contractForm:{},establishProjectForm:{}}}}},data:function(){return{}},created:function(){},watch:{},methods:{validataForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=["projectForm","contractForm","establishProject"],e.next=3,this.$business.checkForm(this,t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateBizFlowVariables:function(){var e={bizVariables:this.form.projectForm.name1};this.$store.commit("work/UPDATE_BIZ_FLOW_VARIABLES",e)}},mounted:function(){}},s=l,c=a("2877"),u=Object(c["a"])(s,r,n,!1,null,"0b322500",null);t["default"]=u.exports},d342:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return s}));var r=a("b775");function n(e){return Object(r["a"])({url:"/kylin/formData/list",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/kylin/formData/findList",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/kylin/formData",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/kylin/formData",method:"put",data:e})}function s(e){return Object(r["a"])({url:"/kylin/formData/"+e,method:"delete"})}},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},d99d:function(e,t,a){"use strict";a("4fa3")},deb2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-form02"},[a("contract-info",{ref:"contractForm",attrs:{form:e.form.contractForm}})],1)},n=[],o=(a("96cf"),a("1da1")),i=a("7732"),l={components:{ProjectInfo:i["ProjectInfo"],ContractInfo:i["ContractInfo"]},name:"BaseForm02",props:{form:{type:Object,default:function(){return{projectForm:{},contractForm:{}}}}},data:function(){return{}},created:function(){},watch:{},methods:{validataForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=["contractForm"],e.next=3,this.$business.checkForm(this,t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateBizFlowVariables:function(){var e={bizVariables:this.form.contractForm.name1};this.$store.commit("work/UPDATE_BIZ_FLOW_VARIABLES",e)}},mounted:function(){}},s=l,c=a("2877"),u=Object(c["a"])(s,r,n,!1,null,"1a8187d4",null);t["default"]=u.exports},e738:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contrace-info"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("合同信息")])]),e._v(" "),a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px",rules:e.rules,disabled:e.readOnlyState}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"合同名称",prop:"name1"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name1,callback:function(t){e.$set(e.form,"name1",t)},expression:"form.name1"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否签署",prop:"name2"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name2,callback:function(t){e.$set(e.form,"name2",t)},expression:"form.name2"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签署日期",prop:"name3"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},model:{value:e.form.name3,callback:function(t){e.$set(e.form,"name3",t)},expression:"form.name3"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"税后可确认总收入（万元）",prop:"name4"}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:function(t){return e.numberInputHandler("form.name4")}},model:{value:e.form.name4,callback:function(t){e.$set(e.form,"name4",t)},expression:"form.name4"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"总金额（万元）",prop:"name5"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:e.disabled},on:{input:function(t){return e.numberInputHandler("form.name5")}},model:{value:e.form.name5,callback:function(t){e.$set(e.form,"name5",t)},expression:"form.name5"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件费用金额（万元）",prop:"name6"}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:function(t){return e.numberInputHandler("form.name6")}},model:{value:e.form.name6,callback:function(t){e.$set(e.form,"name6",t)},expression:"form.name6"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"硬件费用金额（万元）",prop:"name7"}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:function(t){return e.numberInputHandler("form.name7")}},model:{value:e.form.name7,callback:function(t){e.$set(e.form,"name7",t)},expression:"form.name7"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据费用金额（万元）",prop:"name8"}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:function(t){return e.numberInputHandler("form.name8")}},model:{value:e.form.name8,callback:function(t){e.$set(e.form,"name8",t)},expression:"form.name8"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"服务费用金额（万元）",prop:"name9"}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:function(t){return e.numberInputHandler("form.name9")}},model:{value:e.form.name9,callback:function(t){e.$set(e.form,"name9",t)},expression:"form.name9"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员费用金额（万元）",prop:"name10"}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:function(t){return e.numberInputHandler("form.name10")}},model:{value:e.form.name10,callback:function(t){e.$set(e.form,"name10",t)},expression:"form.name10"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"其他费用金额（万元）",prop:"name11"}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:function(t){return e.numberInputHandler("form.name11")}},model:{value:e.form.name11,callback:function(t){e.$set(e.form,"name11",t)},expression:"form.name11"}})],1)],1)],1)],1)],1)])],1)},n=[],o=a("52a7b"),i=a("b287"),l={mixins:[o["default"]],components:{},name:"ContractInfo",props:{form:{type:Object,default:function(){return{name1:"",name2:"",name3:"",name4:"",name5:"",name6:"",name7:"",name8:"",name9:"",name10:"",name11:""}}}},inject:["changeReadOnlyState"],data:function(){return{disabled:!0,rules:{name4:[{validator:i["NumberReg"],trigger:"blur"}],name6:[{validator:i["NumberReg"],trigger:"blur"}],name7:[{validator:i["NumberReg"],trigger:"blur"}],name8:[{validator:i["NumberReg"],trigger:"blur"}],name9:[{validator:i["NumberReg"],trigger:"blur"}],name10:[{validator:i["NumberReg"],trigger:"blur"}],name11:[{required:!0,message:"必填项",trigger:"blur"},{validator:i["NumberReg"],trigger:"blur"}]}}},computed:{readOnlyState:function(){return this.changeReadOnlyState()}},created:function(){},watch:{},methods:{},mounted:function(){}},s=l,c=a("2877"),u=Object(c["a"])(s,r,n,!1,null,"4e0ae2d0",null);t["default"]=u.exports},e7bc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formItem"},[a("BaseForm",{ref:"baseForm",attrs:{formType:e.baseFormType,form:e.baseForm,approvalForm:e.approvalForm,approvalVisible:e.approvalVisible}}),e._v(" "),e.formPreView1.visible?a("FormBuild",{ref:"dynamicForm1",attrs:{options:e.formPreView1.jsonData,"dynamic-data":e.formPreView1.dynamicData,"default-value":e.formPreView1.defaultValue,disabled:e.formPreView1.disabled},on:{"update:options":function(t){return e.$set(e.formPreView1,"jsonData",t)},"update:dynamicData":function(t){return e.$set(e.formPreView1,"dynamicData",t)},"update:dynamic-data":function(t){return e.$set(e.formPreView1,"dynamicData",t)}}},[a("p",{attrs:{slot:"customizeTable1"},slot:"customizeTable1"},[e._v("自定义组件1")]),e._v(" "),a("p",{attrs:{slot:"customizeTable2"},slot:"customizeTable2"},[e._v("自定义组件2")])]):e._e(),e._v(" "),a("tree-table-dialog",{attrs:{title:e.treeTableDialog.title,visible:e.treeTableDialog.visible,tableHeaders:e.treeTableDialog.tableHeaders,tableData:e.treeTableDialog.tableData},on:{"update:visible":function(t){return e.$set(e.treeTableDialog,"visible",t)},search:e.treeTableSearch,selectItem:e.treeTableSelectItem}}),e._v(" "),a("table-dialog",{attrs:{title:e.tableDialog.title,visible:e.tableDialog.visible,tableHeaders:e.tableDialog.tableHeaders,tableData:e.tableDialog.tableData,currentPage:e.tableDialog.pageObj.currentPage,total:e.tableDialog.pageObj.total,pageSize:e.tableDialog.pageObj.pageSize},on:{"update:visible":function(t){return e.$set(e.tableDialog,"visible",t)},search:e.tableSearch,selectItem:e.tableSelectItem,currentPageChange:e.tableCurrentPageChange,pageSizeChange:e.tablePageSizeChange}}),e._v(" "),a("tree-select-table-dialog",{attrs:{title:e.treeSelectTableDialog.title,visible:e.treeSelectTableDialog.visible,tableHeaders:e.treeSelectTableDialog.tableHeaders,tableData:e.treeSelectTableDialog.tableData,currentPage:e.treeSelectTableDialog.pageObj.currentPage,total:e.treeSelectTableDialog.pageObj.total,pageSize:e.treeSelectTableDialog.pageObj.pageSize},on:{"update:visible":function(t){return e.$set(e.treeSelectTableDialog,"visible",t)},searchCompany:e.treeSelectTableSearchCompany,searchName:e.treeSelectTableSearchName,treeNodeClick:e.treeNodeClickHander,selectItem:e.tableSearch,currentPageChange:e.tableSearch,pageSizeChange:e.tableSearch}}),e._v(" "),a("d-table-dialog",{attrs:{inputDefaultValue:e.ruleForm1.dname,propName:e.dTableDialog.propName,request:e.dTableDialog.request,title:e.dTableDialog.title,visible:e.dTableDialog.visible,tableHeaders:e.dTableDialog.tableHeaders},on:{"update:visible":function(t){return e.$set(e.dTableDialog,"visible",t)}}})],1)},n=[],o=(a("8e6e"),a("456d"),a("96cf"),a("1da1")),i=(a("7f7f"),a("ac6a"),a("6b54"),a("6762"),a("2fdb"),a("7514"),a("ade3")),l=a("61a3"),s=a("5979"),c=a("a0d2"),u=a("decf"),p=a("e80d"),d=(a("9675"),a("796a")),m=a("a89c"),f=a("4903"),b=a("2f62"),h=a("d342"),v=a("9b41"),g=a("300f");function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={components:{TreeTableDialog:l["a"],TableDialog:s["a"],TreeSelectTableDialog:c["a"],Upload:u["a"],EbTable:p["a"],PreFormView:d["a"],DTableDialog:m["a"],FormBuild:f["a"],BaseForm:g["default"]},name:"FormViewer",inject:["changeReadOnlyState"],data:function(){return{baseFormType:"",baseFormGetApi:"",baseFormPostApi:"",baseForm:{},approvalFormId:"",approvalForm:{},approvalDataValue:{},approvalVisible:!1,ebTable:{label:"外部采购费用",tableHeader:[{label:"姓名",prop:"name",type:"text"},{label:"性别",prop:"gender",type:"number"},{label:"年龄",prop:"age",type:"number"}],tableItemBak:{name:"",gender:"",age:""},tableList:[]},dTableDialog:{request:{url:"/kylin/formData/list",method:"get"},title:"表格弹窗",visible:!1,width:"",propName:"controlName",tableHeaders:[{prop:"createTime",label:"日期",width:""},{prop:"controlName",label:"表单名称",width:""},{prop:"businessKey",label:"表单key",width:""}]},treeTableDialog:{title:"树形搜索弹窗",visible:!1,width:"",tableHeaders:[{prop:"date",label:"日期",width:"180"},{prop:"name",label:"姓名",width:"180"},{prop:"address",label:"地址",width:""}],tableData:[{id:1,date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{id:3,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄",children:[{id:31,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{id:32,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"}]},{id:4,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:5,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:6,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:7,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]},tableDialog:{title:"表格弹窗",visible:!1,width:"",tableHeaders:[{prop:"date",label:"日期",width:"180"},{prop:"name",label:"姓名",width:"180"},{prop:"address",label:"地址",width:""}],tableData:[{id:1,date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{id:4,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:5,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:6,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:7,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],pageObj:{currentPage:1,total:100,pageSize:10}},treeSelectTableDialog:{title:"树形图+表格弹窗",visible:!1,width:"",tableHeaders:[{prop:"date",label:"日期",width:"180"},{prop:"name",label:"姓名",width:"180"},{prop:"address",label:"地址",width:""}],tableData:[{id:1,date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{id:4,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:5,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:6,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{id:7,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],pageObj:{currentPage:1,total:100,pageSize:10}},ruleForm1:{name:"",dname:""},rules1:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]},ruleForm2:{desc:"",files:[]},rules2:{desc:[{required:!0,message:"描述不能为空",trigger:"blur"}],files:[{required:!0,message:"上传文件不能为空",trigger:"blur"}],name1:[{required:!0,message:"外采1不能为空",trigger:"blur"}],name2:[{required:!0,message:"金额1不能为空",trigger:"blur"}],name3:[{required:!0,message:"占比1不能为空",trigger:"blur"}]},formPreView1:{visible:!1,formId:"",disabled:!1,jsonData:{},width:"",defaultValue:{},dynamicData:{}},unwatch:null}},computed:y(y({},Object(b["c"])(["workDetail","browseWorkDetail","approvalVariables","bizFlowVariables"])),{},{readOnlyState:function(){return this.changeReadOnlyState()},id:function(){var e=this.readOnlyState?this.browseWorkDetail.id:this.workDetail.id;return e}}),beforeDestroy:function(){this.unwatch&&this.unwatch()},created:function(){var e=this;this.unwatch=this.$watch("id",(function(t,a){e.initData()}),{deep:!0,immediate:!0})},methods:y(y({},Object(b["b"])(["GetToDoCont"])),{},{handleClose:function(){},handlerSearch:function(){var e=this,t=this.searchObj,a={};for(var r in t)"undefined"!=typeof t[r]&&"null"!=typeof t[r]&&null!=t[r]&&""!=t[r]&&(Array.isArray(t[r])&&t[r].length>0?a[r]=t[r]:Array.isArray(t[r])||(a[r]=t[r]));var n=this.form.projectMemberList,o=n.filter((function(t){var r=!0,n=function(n){var o=e.searchOptions.find((function(e){return e.searchName===n})),i=o.type,l=o.tableName;if("datepicker"===i){var s=a[n],c=new Date(s[0]).getTime(),u=new Date(s[1]).getTime(),p=new Date(t[l]+" 00:00:00").getTime();if(!(p>=c&&p<=u))return r=!1,"break";r=!0}else if("checkbox"===i){if(!a[n].includes(t[l]))return r=!1,"break";r=!0}else{if(!(t[n].toString().indexOf(a[n].toString())>=0))return r=!1,"break";r=!0}};for(var o in a){var i=n(o);if("break"===i)break}if(r)return t}));console.log("搜索结果",JSON.stringify(o))},renderHeaderCheckbox:function(e,t,a){var r=this,n=t.column,o=(t.$index,this.searchOptions.find((function(e){return e.tableName===n.property})).searchName);return e("span",[n.label,e("el-popover",{attrs:{placement:"bottom",width:"145",height:"200",trigger:"click"},model:{value:r.show[o],callback:function(e){r.$set(r.show,o,e)}}},[e("span",{slot:"reference"},[e("i",{class:"el-icon-arrow-down",style:"fontSize:12px"})]),e("div",{class:"pop-content"},[e("el-checkbox-group",{model:{value:r.searchObj[o],callback:function(e){r.$set(r.searchObj,o,e)}}},[e("el-checkbox",{attrs:{label:"内部资源"},style:"display:block;paddingBottom:5px"}),e("el-checkbox",{attrs:{label:"外部资源"},style:"display:block;paddingBottom:5px"})]),e("div",{class:"el-table-filter__bottom",style:"paddingBottom:0px;"},[e("button",{class:this.searchObj[o].length>0?"":"is-disabled",on:{click:this.handlerSearch}},["筛选"]),e("button",{on:{click:this.clearSearch.bind(this,o)}},["重置"])])])])])},renderHeaderDatePicker:function(e,t,a){var r=this,n=t.column,o=(t.$index,this.searchOptions.find((function(e){return e.tableName===n.property})).searchName);return e("span",[n.label,e("el-popover",{attrs:{placement:"bottom",width:"377",height:"200",trigger:"click"},model:{value:r.show[o],callback:function(e){r.$set(r.show,o,e)}}},[e("span",{slot:"reference"},[e("i",{class:"el-icon-arrow-down",style:"fontSize:12px"})]),e("div",{class:"pop-content"},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},style:"marginBottom:10px",model:{value:r.searchObj[o],callback:function(e){r.$set(r.searchObj,o,e)}}}),e("div",{class:"el-table-filter__bottom",style:"paddingBottom:0px;"},[e("button",{class:this.searchObj[o].length>0?"":"is-disabled",on:{click:this.handlerSearch}},["筛选"]),e("button",{on:{click:this.clearSearch.bind(this,o)}},["重置"])])])])])},clearSearch:function(e){var t=this.searchOptions.find((function(t){return t.searchName===e})).type;this.searchObj[e]="datepicker"===t||"checkbox"===t?[]:"",this.handlerSearch()},initData:function(){var e=this,t=this.readOnlyState?this.browseWorkDetail.id:this.workDetail.id,a=this.readOnlyState?this.browseWorkDetail.businessKey:this.workDetail.businessKey,r=this.readOnlyState?this.browseWorkDetail.taskDefinitionKey:this.workDetail.taskDefinitionKey,n={businessKey:a,nodeId:r,taskId:t};Object(h["b"])(n).then((function(t){t.data.forEach((function(t){if(t.formType&&"0"===t.formType){if(e.baseFormType=t.router,e.baseFormGetApi=t.selectUrl,e.baseFormPostApi=t.submitUrl,e.baseFormGetApi&&""!==e.baseFormGetApi){var a=e.readOnlyState?e.browseWorkDetail.bizKey:e.workDetail.bizKey;Object(v["b"])(e.baseFormGetApi,a).then((function(t){200===t.code?(e.baseForm=t.data,e.baseFormType&&e.$refs.baseForm&&e.$refs.baseForm.$refs[e.baseFormType].handleFormData&&e.$refs.baseForm.$refs[e.baseFormType].handleFormData(e.baseForm)):e.$message({type:"error",message:t.message})}))}}else if(t.formType&&"1"===t.formType){e.formPreView1.jsonData=JSON.parse(t.controlValue),e.formPreView1.formId=t.id,e.formPreView1.visible=!0;e.formPreView1.jsonData.list.filter((function(e){return"customize"===e.type}))}else t.formType&&"2"===t.formType&&(e.approvalVisible=!0,e.approvalFormId=t.id,t.dataValue&&t.dataValue.formDataValue&&(e.approvalForm=JSON.parse(t.dataValue.formDataValue)),t.dataValue&&(e.approvalDataValue=t.dataValue))}))}))},treeTableSearch:function(e){console.log("树形表格---搜索文字",e)},treeTableSelectItem:function(e){console.log("树形表格---选择某一行",e),this.ruleForm1.name=e.name},tableSearch:function(e){console.log("树形表格---搜索文字",e)},tableSelectItem:function(e){console.log("树形表格---选择某一行",e),this.ruleForm1.name=e.name},tableCurrentPageChange:function(e){console.log("当前页: ".concat(e))},tablePageSizeChange:function(e){console.log("每页 ".concat(e," 条"))},treeNodeClickHander:function(e){console.log("选中的树形节点",e)},treeSelectTableSearchCompany:function(e){console.log("树形+右侧表格--搜索机构",e)},treeSelectTableSearchName:function(e){console.log("树形+右侧表格--搜索人员",e)},saveForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,l,s,c,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this.$refs.baseForm.form,console.log("formviewer",a),!a||0===Object.keys(a).length||!this.baseFormPostApi||""===this.baseFormPostApi){e.next=9;break}return r=this.workDetail.bizKey,console.log(a),n=JSON.stringify(a),o={bizKey:r,baseFormData:n},e.next=9,Object(v["j"])(this.baseFormPostApi,o).then((function(e){if(200!==e.code)return!1}));case 9:if(i=this.$refs.baseForm.approvalForm,!i||0===Object.keys(i).length||!this.approvalDataValue){e.next=18;break}return l=this.workDetail.id,s=this.approvalFormId,c=this.approvalDataValue.id,u=JSON.stringify(this.$refs.baseForm.approvalForm),p={taskId:l,formId:s,formValueId:c,formValue:u},e.next=18,Object(v["i"])(p).then((function(e){if(200!==e.code)return!1}));case 18:return t||(this.$message({type:"success",message:"保存成功!"}),this.$parent.pageClose()),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,o,i,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$refs.baseForm.validataForm();case 3:if(a=e.sent,console.log("基础表单校验结果",a),a){e.next=7;break}return e.abrupt("return",Promise.reject(a));case 7:return e.next=9,this.saveForm(!0);case 9:if(r=e.sent,r){e.next=12;break}return e.abrupt("return");case 12:return this.$refs.baseForm.saveChildVariables(),n=this.approvalVariables?Object.assign(this.approvalVariables,this.bizFlowVariables):this.bizFlowVariables,o=this.workDetail.id,i={taskId:o,variables:n},this.$store.commit("work/UPDATE_APPROVAL_VARIABLES",null),this.$store.commit("work/UPDATE_BIZ_FLOW_VARIABLES",null),e.next=20,Object(v["k"])(i,t).then((function(e){200===e.code&&(l.$message({type:"success",message:e.msg}),l.GetToDoCont(),l.$parent.pageClose())}));case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelRequest:function(){this.cancelSubTask&&this.cancelSubTask()}}),mounted:function(){}},O=w,k=(a("11e7"),a("2877")),D=Object(k["a"])(O,r,n,!1,null,"b47cc9ee",null);t["default"]=D.exports},ea5f:function(e,t,a){"use strict";a("29fd")}}]);